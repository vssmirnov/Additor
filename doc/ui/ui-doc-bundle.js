!function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=42)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.min=e.min,this.max=e.max,this.enum=e.enum,this.transform=e.transform}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.constraintMap=[[]],this._parseMap(e,this.constraintMap[0],this.constraintMap)}return i(t,[{key:"constrain",value:function(t){var e=this;e.constraintMap.forEach(function(n){e._constrainBranch(t,n)})}},{key:"_applyConstraint",value:function(t,e,n){return void 0!==e.min&&(t[n]=Math.max(t[n],e.min)),void 0!==e.max&&(t[n]=Math.min(t[n],e.max)),void 0!==e.enum&&e.enum instanceof Array&&(t[n]=void 0!==e.enum.find(t[n])?t[n]:e.enum[0]),void 0!==e.transform&&"function"==typeof e.transform&&(t[n]=e.transform(t[n])),t}},{key:"_parseMap",value:function(t,e,n){var i=this;if(t instanceof Array)e.push("_arr_"),i._parseMap(t[0],e,n);else if(t instanceof Object&&!(t instanceof s.default)){var r=e.map(function(t){return t});Object.keys(t).forEach(function(s,o){if(0===o)e.push(s),i._parseMap(t[s],e,n);else{var a=r.map(function(t){return t});n.push(a),a.push(s),i._parseMap(t[s],a,n)}})}else t instanceof s.default&&e.push(t)}},{key:"_constrainBranch",value:function(t,e){for(var n=void 0,i=e[e.length-1],s=!1,r=0;r<e.length-2&&!s;++r)if("_arr_"===(n=e[r])){s=!0;for(var o=e.slice(r+1,e.length),a=0;a<t.length;++a)this._constrainBranch(t[a],o)}else t=t[n];if(!s)if("_arr_"===(n=e[e.length-2]))for(var l=0;l<t.length;++l)this._applyConstraint(t,i,l);else this._applyConstraint(t,i,n)}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=i(n(9)),o=i(n(10)),a=i(n(11)),l=i(n(12)),u=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e||!(e instanceof Element))throw new Error("widget requires a DOM element specifying its container as the first argument");this.container=e,n=n||{},this.svg=document.createElementNS(this.SVG_NS,"svg"),this.container.appendChild(this.svg),this.svg.setAttribute("width",this.container.getBoundingClientRect().width),this.svg.setAttribute("height",this.container.getBoundingClientRect().height),this.o={},this.svgEls={},this.handlers={},this.state={},this.stateConstraints={},this.observers=[],this._initOptions(n),this._initStateConstraints(),this._initState(),this._initSvgEls(),this._initHandlers()}return s(t,[{key:"_initOptions",value:function(t){}},{key:"_initStateConstraints",value:function(){}},{key:"_initState",value:function(){}},{key:"_initSvgEls",value:function(){}},{key:"_appendSvgEls",value:function(){function t(n){n instanceof Array?n.forEach(function(e){return t(e)}):(e.svg.appendChild(n),n.setAttribute("shape-rendering","geometricPrecision"))}var e=this;Object.values(e.svgEls).forEach(function(e){t(e)})}},{key:"_initHandlers",value:function(){}},{key:"_update",value:function(){}},{key:"getVal",value:function(){}},{key:"setInternalVal",value:function(t){}},{key:"setVal",value:function(t){}},{key:"getState",value:function(){}},{key:"setInternalState",value:function(t){}},{key:"setState",value:function(t){}},{key:"_getRelativeX",value:function(t){return t-this._getLeft()}},{key:"_getRelativeY",value:function(t){return t-this._getTop()}},{key:"_getWidth",value:function(){return this.svg.getBoundingClientRect().width}},{key:"_getHeight",value:function(){return this.svg.getBoundingClientRect().height}},{key:"_getTop",value:function(){return this.svg.getBoundingClientRect().top}},{key:"_getLeft",value:function(){return this.svg.getBoundingClientRect().left}}]),t}();Object.assign(u.prototype,r.default),Object.assign(u.prototype,o.default),Object.assign(u.prototype,a.default),Object.assign(u.prototype,l.default),e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)},o=i(n(2)),a=i(n(0)),l=i(n(1)),u=i(n(4)),h=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),s(e,[{key:"getVal",value:function(){return this.state.val}},{key:"setInternalVal",value:function(t){this.setInternalState({val:t})}},{key:"setVal",value:function(t){this.setState({val:t})}},{key:"setOptions",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.o.stepPrecision=u.default.getPrecision(this.o.stepInterval)}},{key:"_initOptions",value:function(t){this.o={minVal:0,maxVal:127,stepInterval:1,needleColor:"#414141",activeColor:"#f40",mouseSensitivity:1.2},r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this).call(this,t),this.o.stepPrecision=u.default.getPrecision(this.o.stepInterval)}},{key:"_initStateConstraints",value:function(){var t=this;this.stateConstraints=new l.default({val:new a.default({min:t.o.minVal,max:t.o.maxVal,transform:function(e){return u.default.quantize(e,t.o.stepInterval,t.o.stepPrecision)}})})}},{key:"_initState",value:function(){this.state={val:0}}},{key:"_initSvgEls",value:function(){this.svgEls={bgArc:document.createElementNS(this.SVG_NS,"path"),activeArc:document.createElementNS(this.SVG_NS,"path"),needle:document.createElementNS(this.SVG_NS,"line")},this.svgEls.bgArc.setAttribute("d",this._calcSvgArcPath(this._calcNeedleCenter().x,this._calcNeedleCenter().y,this._calcDialRadius(),.67*Math.PI,2.35*Math.PI)),this.svgEls.bgArc.setAttribute("stroke-width",this._calcArcStrokeWidth()),this.svgEls.bgArc.setAttribute("stroke",this.o.needleColor),this.svgEls.bgArc.setAttribute("fill","transparent"),this.svgEls.bgArc.setAttribute("stroke-linecap","round"),this.svgEls.activeArc.setAttribute("stroke-width",this._calcArcStrokeWidth()),this.svgEls.activeArc.setAttribute("stroke",this.o.activeColor),this.svgEls.activeArc.setAttribute("fill","transparent"),this.svgEls.activeArc.setAttribute("stroke-linecap","round"),this.svgEls.needle.setAttribute("x1",this._calcNeedleCenter().x),this.svgEls.needle.setAttribute("y1",this._calcNeedleCenter().y),this.svgEls.needle.setAttribute("x2",this._calcNeedleEnd().x),this.svgEls.needle.setAttribute("y2",this._calcNeedleEnd().y),this.svgEls.needle.setAttribute("stroke-width",this._calcNeedleWidth()),this.svgEls.needle.setAttribute("stroke",this.o.needleColor),this.svgEls.needle.setAttribute("z-index","1000"),this.svgEls.needle.setAttribute("stroke-linecap","round"),this._appendSvgEls(),this._update()}},{key:"_initHandlers",value:function(){var t=this,e=0,n=0,i=t.getState().val;this.handlers={touch:function(n){e=n.clientY,document.addEventListener("mousemove",t.handlers.move),document.addEventListener("touchmove",t.handlers.move),document.addEventListener("mouseup",t.handlers.release),document.addEventListener("touchend",t.handlers.release)},move:function(s){s.preventDefault(),n=e-s.clientY,e=s.clientY,i=t.state.val+n*t.o.mouseSensitivity*t._calcMovePrecision(),i=Math.max(i,t.o.minVal),i=Math.min(i,t.o.maxVal),t.setState({val:i})},release:function(){document.removeEventListener("mousemove",t.handlers.move),document.removeEventListener("touchmove",t.handlers.move)}},this.svg.addEventListener("mousedown",t.handlers.touch),this.svg.addEventListener("touchstart",t.handlers.touch)}},{key:"_update",value:function(){this.svgEls.needle.setAttribute("x1",this._calcNeedleCenter().x),this.svgEls.needle.setAttribute("y1",this._calcNeedleCenter().y),this.svgEls.needle.setAttribute("x2",this._calcNeedleEnd().x),this.svgEls.needle.setAttribute("y2",this._calcNeedleEnd().y),this.svgEls.activeArc.setAttribute("d",this._calcSvgArcPath(this._calcNeedleCenter().x,this._calcNeedleCenter().y,this._calcDialRadius(),.65*Math.PI,this._calcNeedleAngle()-.5*Math.PI)),this.state.val===this.o.minVal?this.svgEls.activeArc.setAttribute("stroke",this.o.needleColor):this.svgEls.activeArc.setAttribute("stroke",this.o.activeColor)}},{key:"_calcArcStrokeWidth",value:function(){return this._calcDialRadius()/5}},{key:"_calcDialRadius",value:function(){var t=Math.min(this._getWidth(),this._getHeight())/2*.89;return t=Math.trunc(t)}},{key:"_calcNeedleAngle",value:function(){return this.o.maxVal-this.o.minVal!=0?(this.state.val-this.o.minVal)/(this.o.maxVal-this.o.minVal)*(1.7*Math.PI)+1.15*Math.PI:1.7*Math.PI*.5+1.15*Math.PI}},{key:"_calcNeedleCenter",value:function(){return{x:Math.trunc(this._getWidth()/2),y:Math.trunc(this._getHeight()/2)}}},{key:"_calcNeedleEnd",value:function(){return{x:this._calcNeedleCenter().x+Math.sin(this._calcNeedleAngle())*this._calcDialRadius(),y:this._calcNeedleCenter().y-Math.cos(this._calcNeedleAngle())*this._calcDialRadius()}}},{key:"_calcNeedleWidth",value:function(){return this._calcDialRadius()/5}},{key:"_calcSvgArcPath",value:function(t,e,n,i,s){var r=t+n*Math.cos(i),o=e+n*Math.sin(i),a=t+n*Math.cos(s),l=e+n*Math.sin(s);return["M",r,o,"A",n,n,0,s-i<Math.PI?0:1,(Math.PI,1),a,l].join(" ")}},{key:"_calcMovePrecision",value:function(){return(this.o.maxVal-this.o.minVal)/127}}]),e}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={getPrecision:function(t){var e=(""+t).split(".")[1];return e?e.length:0},round:function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},quantize:function(t,e,n){var s=void 0;return 0==e?0:(e<0&&(e=Math.abs(e)),s=~~(t/e)*e,s=Math.abs(t-s)>e/2?s>0?s+e:s-e:s,void 0!==n&&(s=i.round(s,n)),s)},q:function(t,e,n){return i.quantize(t,e,n)}};e.default=i},,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=i(n(2)),o=i(n(0)),a=i(n(1)),l=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),s(e,[{key:"getVal",value:function(){return this.state.val}},{key:"setInternalVal",value:function(t){this.setInternalState({val:t})}},{key:"setVal",value:function(t){this.setState({val:t})}},{key:"_initOptions",value:function(t){this.o={minVal:0,maxVal:127,precision:0,quantizeInterval:1,backgroundColor:"#282828",fontColor:"#ccc",fontSize:"12px",fontFamily:"Arial",appendString:"",mouseSensitivity:1.2},function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initStateConstraints",value:function(){var t=this,e={transform:function(e){return console.log("val: ",t.state.val,"num: ",e),e.toFixed(0)}};null!==this.o.minVal&&(e.minVal=this.o.minVal),null!==this.o.maxVal&&(e.maxVal=this.o.maxVal),this.stateConstraints=new a.default({val:new o.default(e)})}},{key:"_initState",value:function(){this.state={val:0}}},{key:"_initSvgEls",value:function(){this.svgEls={panel:document.createElementNS(this.SVG_NS,"rect"),text:document.createElementNS(this.SVG_NS,"text"),overlay:document.createElementNS(this.SVG_NS,"rect")},this.svgEls.text.setAttribute("alignment-baseline","middle"),this.svgEls.text.setAttribute("text-anchor","middle"),this._appendSvgEls(),this._update()}},{key:"_initHandlers",value:function(){var t=this,e=0,n=0,i=t.getState().val;this.handlers={touch:function(n){n.preventDefault(),n.stopPropagation(),e=n.clientY,document.addEventListener("mousemove",t.handlers.move),document.addEventListener("touchmove",t.handlers.move),document.addEventListener("mouseup",t.handlers.release),document.addEventListener("touchend",t.handlers.release)},move:function(s){s.preventDefault(),s.stopPropagation(),n=e-s.clientY,i=t.getVal()+n*t.o.mouseSensitivity,t.setState({val:i})},release:function(e){e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",t.handlers.move),document.removeEventListener("touchmove",t.handlers.move)}},this.svg.addEventListener("mousedown",t.handlers.touch),this.svg.addEventListener("touchstart",t.handlers.touch)}},{key:"_update",value:function(){this.svgEls.text.textContent=this.state.val+this.o.appendString;var t=this._getWidth(),e=this._getHeight();this.svgEls.text.getBoundingClientRect().width,this.svgEls.text.getBoundingClientRect().height;this.svgEls.panel.setAttribute("fill",this.o.backgroundColor),this.svgEls.panel.setAttribute("width",t),this.svgEls.panel.setAttribute("height",e),this.svgEls.text.setAttribute("x",t/2),this.svgEls.text.setAttribute("y",e/2),this.svgEls.text.setAttribute("fill",this.o.fontColor),this.svgEls.overlay.setAttribute("fill","transparent"),this.svgEls.overlay.setAttribute("width",this._getWidth()),this.svgEls.overlay.setAttribute("height",this._getHeight())}}]),e}();e.default=l},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={SVG_NS:"http://www.w3.org/2000/svg"}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});i(n(0)),i(n(1));var s={getState:function(){return Object.assign({},this.state)},setInternalState:function(t){var e=this,n=!1;return t=t||this.getState(),Object.keys(t).forEach(function(i){e.state.hasOwnProperty(i)&&e.state[i]!==t[i]&&(e.state[i]=t[i],n=!0)}),e.stateConstraints.constrain(e.state),this._update(),n},setState:function(t){var e=!1;return e=this.setInternalState(t),this._notifyObservers(),e}};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_initOptions:function(t){var e=this;t=t||{},Object.keys(t).forEach(function(n){e.o.hasOwnProperty(n)&&e.o[n]!==t[n]&&(e.o[n]=t[n])})},getOptions:function(){return Object.assign({},this.o)},setOptions:function(t){var e=this;t=t||{};var n=!1;return Object.keys(t).forEach(function(i){e.o.hasOwnProperty(i)&&e.o[i]!==t[i]&&(e.o[i]=t[i],n=!0)}),n&&this.setState(),n}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={addObserver:function(t){var e=!1;return this.observers.find(function(e){return e===t})||(this.observers.push(t),e=!0),e},removeObserver:function(t){var e=this,n=!1;return this.observers.forEach(function(i,s){i===t&&(e.observers.splice(s,1),n=!0)}),n},_notifyObservers:function(){var t=this;this.observers.forEach(function(e){return e(t.getVal())})}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=i(n(2)),o=i(n(0)),a=i(n(1)),l=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),s(e,[{key:"getVal",value:function(){return this.state.selectedItemIdx}},{key:"getSelectedItem",value:function(){return this.state.menuItems[this.state.selectedItemIdx]}},{key:"setInternalVal",value:function(t){this.setInternalState({selectedItemIdx:t})}},{key:"setVal",value:function(t){this.setState({selectedItemIdx:t})}},{key:"setSelectionIdx",value:function(t){this.setState({selectedItemIdx:t})}},{key:"setInternalSelectionIdx",value:function(t){this.setInternalState({selectedItemIdx:t})}},{key:"setSelectedItem",value:function(t){var e=this.state.menuItems.findIndex(function(e){return t===e});return-1!==e?this.setVal(e):e=this.state.selectedItemIdx,e}},{key:"setInternalSelectedItem",value:function(t){var e=this.state.menuItems.findIndex(function(e){return t===e});return-1!==e?this.setVal(e):e=this.state.selectedItemIdx,e}},{key:"setMenuItems",value:function(t){this.setState({menuItems:t})}},{key:"_initOptions",value:function(t){this.o={menuItems:[],backgroundColor:"#282828",fontColor:"#ccc",fontSize:"12px",fontFamily:"Arial",menuItemFontSize:"12px",menuItemFontFamily:"Arial",menuItemVerticalPadding:5,menuItemHorizontalPadding:10,selectedItemBackgroundColor:"#f40",selectedItemFontColor:"#fff",mouseSensitivity:1.2},function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initStateConstraints",value:function(){this.stateConstraints=new a.default({menuItems:[new o.default],selectedItemIdx:new o.default,hasFocus:new o.default})}},{key:"_initState",value:function(){this.state={menuItems:this.o.menuItems,selectedItemIdx:0,hasFocus:!1}}},{key:"_initSvgEls",value:function(){this.svgEls={menuTogglePanel:document.createElementNS(this.SVG_NS,"rect"),menuToggleText:document.createElementNS(this.SVG_NS,"text"),menuToggleOverlay:document.createElementNS(this.SVG_NS,"rect"),menuBodyCanvasContainer:document.createElement("div"),menuBodyCanvas:document.createElementNS(this.SVG_NS,"svg"),menuBodyPanel:document.createElementNS(this.SVG_NS,"rect"),menuItemPanels:[],menuItemTextboxes:[],menuItemOverlays:[]},this.svg.appendChild(this.svgEls.menuTogglePanel),this.svg.appendChild(this.svgEls.menuToggleText),this.svg.appendChild(this.svgEls.menuToggleOverlay),this.svgEls.menuToggleText.setAttribute("alignment-baseline","middle"),this.svgEls.menuBodyCanvasContainer.style.position="relative",this.container.appendChild(this.svgEls.menuBodyCanvasContainer),this.svgEls.menuBodyCanvas=document.createElementNS(this.SVG_NS,"svg"),this.svgEls.menuBodyCanvasContainer.appendChild(this.svgEls.menuBodyCanvas),this.svgEls.menuBodyCanvas.style.position="absolute",this.svgEls.menuBodyCanvas.style.transform="translateY(-5px)",this.svgEls.menuBodyCanvas.appendChild(this.svgEls.menuBodyPanel),this._update()}},{key:"_initHandlers",value:function(){var t=this;this.handlers={touch:function(e){e.preventDefault(),e.stopPropagation(),t.handlers.focus(e)},focus:function(e){e.preventDefault(),e.stopPropagation(),t.setInternalState({hasFocus:!0}),t.svgEls.menuToggleOverlay.removeEventListener("mousedown",t.handlers.touch),t.svgEls.menuToggleOverlay.removeEventListener("touchstart",t.handlers.touch),t.svgEls.menuToggleOverlay.addEventListener("mousedown",t.handlers.blur),t.svgEls.menuToggleOverlay.addEventListener("touchstart",t.handlers.blur),document.body.addEventListener("mousedown",t.handlers.blur),document.body.addEventListener("touchstart",t.handlers.blur)},blur:function(e){e.preventDefault(),e.stopPropagation(),t.setInternalState({hasFocus:!1}),t.svgEls.menuToggleOverlay.removeEventListener("mousedown",t.handlers.blur),t.svgEls.menuToggleOverlay.removeEventListener("touchstart",t.handlers.blur),t.svgEls.menuToggleOverlay.addEventListener("mousedown",t.handlers.touch),t.svgEls.menuToggleOverlay.addEventListener("touchstart",t.handlers.touch),document.body.removeEventListener("mousedown",t.handlers.blur),document.body.removeEventListener("touchstart",t.handlers.blur)},mouseOverItem:function(e){e.preventDefault(),e.stopPropagation();var n=e.target;t._mouseOverItem(n),n.addEventListener("mouseleave",t.handlers.mouseLeaveItem),n.addEventListener("mouseup",function(e){t.handlers.select(e),t.handlers.blur(e)}),n.addEventListener("touchend",function(e){t.handlers.select(e),t.handlers.blur(e)}),document.body.removeEventListener("mousedown",t.handlers.blur),document.body.removeEventListener("touchstart",t.handlers.blur)},mouseLeaveItem:function(e){e.preventDefault(),e.stopPropagation();var n=e.target;t._mouseLeaveItem(e.target,!1),n.removeEventListener("mouseleave",t.handlers.hoverOut),document.body.addEventListener("mousedown",t.handlers.blur),document.body.addEventListener("touchstart",t.handlers.blur)},select:function(e){e.preventDefault(),e.stopPropagation(),t._selectItem(e.target)}},this.svgEls.menuToggleOverlay.addEventListener("mousedown",this.handlers.touch),this.svgEls.menuToggleOverlay.addEventListener("touchstart",this.handlers.touch)}},{key:"_update",value:function(){this._updateEls();for(var t=0;t<this.state.menuItems.length;++t)this.svgEls.menuItemTextboxes[t].textContent=this.state.menuItems[t];if(this.svgEls.menuTogglePanel.setAttribute("fill",this.o.backgroundColor),this.svgEls.menuTogglePanel.setAttribute("width",this._getWidth()),this.svgEls.menuTogglePanel.setAttribute("height",this._getHeight()),this.svgEls.menuToggleText.setAttribute("width",this._getWidth()),this.svgEls.menuToggleText.setAttribute("height",this._getHeight()),this.svgEls.menuToggleText.setAttribute("x",10),this.svgEls.menuToggleText.setAttribute("y",this._getHeight()/2),this.svgEls.menuToggleText.setAttribute("fill",this.o.fontColor),this.svgEls.menuToggleOverlay.setAttribute("fill","transparent"),this.svgEls.menuToggleOverlay.setAttribute("width",this._getWidth()),this.svgEls.menuToggleOverlay.setAttribute("height",this._getHeight()),this.svgEls.menuToggleText.textContent=this.state.menuItems[this.state.selectedItemIdx],this.state.hasFocus){this.svgEls.menuBodyCanvas.style.display="inline-block",this.svgEls.menuBodyCanvasContainer.removeChild(this.svgEls.menuBodyCanvas),this.svgEls.menuBodyCanvasContainer.appendChild(this.svgEls.menuBodyCanvas);var e=this._calcMenuItemDims(),n={height:e.height*this.state.menuItems.length,width:e.width};this.svgEls.menuBodyCanvas.setAttribute("width",n.width),this.svgEls.menuBodyCanvas.setAttribute("height",n.height),this.svgEls.menuBodyCanvas.style.left=0,this.svgEls.menuBodyPanel.setAttribute("width",n.width),this.svgEls.menuBodyPanel.setAttribute("height",n.height),this.svgEls.menuBodyPanel.setAttribute("x",0),this.svgEls.menuBodyPanel.setAttribute("y",0),this.svgEls.menuBodyPanel.setAttribute("fill",this.o.backgroundColor);for(var i=0;i<this.state.menuItems.length;++i){var s=this.svgEls.menuItemPanels[i],r=this.svgEls.menuItemTextboxes[i],o=this.svgEls.menuItemOverlays[i];s.setAttribute("x",0),s.setAttribute("y",i*e.height),s.setAttribute("width",e.width),s.setAttribute("height",e.height),s.setAttribute("fill","transparent"),r.setAttribute("alignment-baseline","middle"),r.setAttribute("fill",this.o.fontColor),r.setAttribute("x",10),r.setAttribute("y",(i+1)*e.height-e.height/2),o.setAttribute("x",0),o.setAttribute("y",i*e.height),o.setAttribute("width",e.width),o.setAttribute("height",e.height),o.setAttribute("fill","transparent")}}else this.svgEls.menuBodyCanvas.style.display="none"}},{key:"_updateEls",value:function(){for(var t=this.svgEls.menuItemTextboxes.length;t<this.state.menuItems.length;++t)this._addSvgMenuItem();for(var e=this.state.menuItems.length;e>this.svgEls.menuItemTextboxes.length;--e)this._removeSvgMenuItem()}},{key:"_mouseOverItem",value:function(t){var e=this.svgEls.menuItemOverlays.findIndex(function(e){return e===t});if(-1!==e){var n=this.svgEls.menuItemPanels[e],i=this.svgEls.menuItemTextboxes[e];n.setAttribute("fill",this.o.selectedItemBackgroundColor),i.setAttribute("fill",this.o.selectedItemFontColor)}}},{key:"_mouseLeaveItem",value:function(t){var e=this.svgEls.menuItemOverlays.findIndex(function(e){return e===t});if(-1!==e){var n=this.svgEls.menuItemPanels[e],i=this.svgEls.menuItemTextboxes[e];n.setAttribute("fill","transparent"),i.setAttribute("fill",this.o.fontColor)}}},{key:"_addSvgMenuItem",value:function(){var t=this,e=document.createElementNS(this.SVG_NS,"text"),n=document.createElementNS(this.SVG_NS,"rect"),i=document.createElementNS(this.SVG_NS,"rect");this.svgEls.menuItemTextboxes.push(e),this.svgEls.menuItemPanels.push(n),this.svgEls.menuItemOverlays.push(i),this.svgEls.menuBodyCanvas.appendChild(n),this.svgEls.menuBodyCanvas.appendChild(e),this.svgEls.menuBodyCanvas.appendChild(i),i.addEventListener("mouseenter",function(e){t.handlers.mouseOverItem(e)})}},{key:"_removeSvgMenuItem",value:function(){var t=this.svgEls.menuItemTextboxes.pop(),e=this.svgEls.menuItemPanels.pop(),n=this.svgEls.menuItemPanels.pop();this.svgEls.menuBodyCanvas.removeChild(t),this.svgEls.menuBodyCanvas.removeChild(e),this.svgEls.menuBodyCanvas.removeChild(n),t=null,e=null,n=null}},{key:"_calcMenuItemDims",value:function(){var t=0,e=0;return this.svgEls.menuItemTextboxes.forEach(function(n){var i=n.getBoundingClientRect();t=t>i.height?t:i.height,e=e>i.width?e:i.width}),e=Math.max(e,this._getWidth()),t+=this.o.menuItemVerticalPadding,e+=this.o.menuItemHorizontalPadding,{width:e,height:t}}},{key:"_selectItem",value:function(t){var e=this.svgEls.menuItemOverlays.findIndex(function(e){return e===t});-1!==e&&this.setState({selectedItemIdx:e})}}]),e}();e.default=l},,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)},o=i(n(2)),a=i(n(0)),l=i(n(1)),u=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),s(e,[{key:"setOptions",value:function(t){void 0===(t=t||{}).bottomNote||this._isWhiteKey(t.bottomNote)||--t.bottomNote,void 0===t.topNote||this._isWhiteKey(t.topNote)||++t.topNote,r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t)}},{key:"getVal",value:function(){return Object.assign({},this.lastNoteEvent)}},{key:"getActiveNotes",value:function(){return this.getState().activeNotes.map(function(t){return[t.pitch,t.vel]})}},{key:"setInternalVal",value:function(t,e){var n=this._getNewStateFromNewNote(t,e);this.setInternalState(n)}},{key:"setVal",value:function(t,e){var n=this._getNewStateFromNewNote(t,e);this.setState(n)}},{key:"_initOptions",value:function(t){this.o={bottomNote:48,topNote:71,keyBorderColor:"#484848",blackKeyColor:"#484848",whiteKeyColor:"#fff",blackKeyActiveColor:"#999",whiteKeyActiveColor:"#999",blackKeyHeightAspect:.6,blackKeyWidthAspect:.66,mode:"polyphonic",orientation:"horizontal",isEditable:!0,mouseSensitivity:1.2},r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initStateConstraints",value:function(){this.stateConstraints=new l.default({activeNotes:[{pitch:new a.default({min:0,max:127}),vel:new a.default({min:0,max:127})}]})}},{key:"_initState",value:function(){this.state={activeNotes:[]},this.lastNoteEvent={}}},{key:"_initSvgEls",value:function(){this.svgEls={keys:[]},this._update()}},{key:"_updateSvgEls",value:function(){for(var t=this._getNumKeys(),e=this.svgEls.keys.length;e<t;++e)this._addSvgKey();for(var n=this.svgEls.keys.length;n>t;++n)this._removeSvgKey()}},{key:"_initHandlers",value:function(){var t=this;this.handlers={touch:function(e){e.preventDefault();var n=Math.ceil(127*(t._getKeyboardHeight()-t._getRelativeY(e.clientY))/t._getKeyboardHeight());t._touchKey(e.target,n);for(var i=0;i<t.svgEls.keys.length;++i)t.svgEls.keys[i].addEventListener("mouseenter",t.handlers.touch),t.svgEls.keys[i].addEventListener("touchenter",t.handlers.touch),t.svgEls.keys[i].addEventListener("mouseup",t.handlers.release),t.svgEls.keys[i].addEventListener("touchend",t.handlers.release)},release:function(){for(var e=0;e<t.svgEls.keys.length;++e)t.svgEls.keys[e].removeEventListener("mouseenter",t.handlers.touch),t.svgEls.keys[e].removeEventListener("touchenter",t.handlers.touch)}};for(var e=0;e<this.svgEls.keys.length;++e)this.svgEls.keys[e].addEventListener("mousedown",this.handlers.touch),this.svgEls.keys[e].addEventListener("touchdown",this.handlers.touch)}},{key:"_touchKey",value:function(t,e){var n={pitch:this.svgEls.keys.findIndex(function(e){return e===t})+this.o.bottomNote,vel:e};this.setVal(n,!0)}},{key:"_update",value:function(){var t=this,e=[],n=new Array(this._getNumKeys());n.fill(0),this.getState().activeNotes.forEach(function(e){n[e.pitch-t.getOptions().bottomNote]=1}),this._updateSvgEls();for(var i=0,s=0;i<this.svgEls.keys.length;++i){var r=this._getPitchForKeyIdx(i),o={};this._isWhiteKey(r)?(o.x=this._getWhiteKeyWidth()*s,o.y=0,o.width=this._getWhiteKeyWidth(),o.height=this._getKeyboardHeight(),o.fill=0===n[i]?this.getOptions().whiteKeyColor:this.getOptions().whiteKeyActiveColor,o.stroke=this.getOptions().keyBorderColor,++s):(e.push(this.svgEls.keys[i]),o.x=this._getWhiteKeyWidth()*s-this.getOptions().blackKeyWidthAspect*this._getWhiteKeyWidth()/2,o.y=0,o.width=this.getOptions().blackKeyWidthAspect*this._getWhiteKeyWidth(),o.height=this.getOptions().blackKeyHeightAspect*this._getKeyboardHeight(),o.fill=0===n[i]?this.getOptions().blackKeyColor:this.getOptions().blackKeyActiveColor,o.stroke=this.getOptions().keyBorderColor),this._setKeyAttributes(i,o)}for(var a=0;a<e.length;++a)this.svg.removeChild(e[a]),this.svg.appendChild(e[a])}},{key:"_getNewStateFromNewNote",value:function(t,e){var n=this.getState(),i=n.activeNotes.findIndex(function(e){return e.pitch===t.pitch});return-1===i?t.vel>0&&n.activeNotes.push(t):t.vel<=0||e?(n.activeNotes.splice(i,1),t.vel=0):n.activeNotes[i].vel=t.vel,this.lastNoteEvent=t,n}},{key:"_addSvgKey",value:function(){var t=document.createElementNS(this.SVG_NS,"rect");this.svg.appendChild(t),this.svgEls.keys.push(t),t.addEventListener("mousedown",this.handlers.touch),t.addEventListener("touchdown",this.handlers.touch)}},{key:"_removeSvgKey",value:function(){var t=this.svgEls.keys[this.svgEls.keys.length-1];this.svg.removeChild(t),t=null,this.svgEls.keys.pop()}},{key:"_setKeyAttributes",value:function(t,e){this.svgEls.keys[t].setAttribute("x",e.x),this.svgEls.keys[t].setAttribute("y",e.y),this.svgEls.keys[t].setAttribute("width",e.width),this.svgEls.keys[t].setAttribute("height",e.height),this.svgEls.keys[t].setAttribute("fill",e.fill),this.svgEls.keys[t].setAttribute("stroke",e.stroke)}},{key:"_getKeyboardWidth",value:function(){var t=this.getOptions().orientation;return"horizontal"===t||"horizontal-mirrored"===t?this._getWidth():"vertical"===t||"vertical-mirrored"===t?this._getHeight():void 0}},{key:"_getKeyboardHeight",value:function(){var t=this.getOptions().orientation;return"horizontal"===t||"horizontal-mirrored"===t?this._getHeight():"vertical"===t||"vertical-mirrored"===t?this._getWidth():void 0}},{key:"_getPitchForKeyIdx",value:function(t){return this.getOptions().bottomNote+t}},{key:"_getNumKeys",value:function(){return this.o.topNote-this.o.bottomNote+1}},{key:"_getNumWhiteKeys",value:function(){for(var t=0,e=this.getOptions().bottomNote;e<=this.getOptions().topNote;++e)this._isWhiteKey(e)&&++t;return t}},{key:"_getWhiteKeyWidth",value:function(){return this._getKeyboardWidth()/this._getNumWhiteKeys()}},{key:"_isWhiteKey",value:function(t){return t%12==0||t%12==2||t%12==4||t%12==5||t%12==7||t%12==9||t%12==11}}]),e}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)},o=i(n(2)),a=i(n(0)),l=i(n(1)),u=i(n(4)),h=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),s(e,[{key:"setOptions",value:function(t){void 0!==(t=t||{}).fixedStartPointY&&(t.fixedStartPointY=Math.min(t.fixedStartPointY,this.o.maxYVal),t.fixedStartPointY=Math.max(t.fixedStartPointY,this.o.minYVal)),void 0!==t.fixedEndPointY&&(t.fixedEndPointY=Math.min(t.fixedEndPointY,this.o.maxYVal),t.fixedEndPointY=Math.max(t.fixedEndPointY,this.o.minYVal)),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t)}},{key:"getVal",value:function(){return this.state.vertices.map(function(t){return[t.x,t.y]})}},{key:"setInternalVal",value:function(t){var e=t.map(function(t){return{x:t[0],y:t[1]}});this.setInternalState({vertices:e})}},{key:"setVal",value:function(t){var e=t.map(function(t){return{x:t[0],y:t[1]}});this.setState({vertices:e})}},{key:"addVertex",value:function(t){var e=this.getState().vertices.map(function(t){return t});e.push({x:t.x,y:t.y}),e.sort(function(t,e){return t.x-e.x}),this.setState({vertices:e})}},{key:"_initOptions",value:function(t){this.o={minXVal:0,minYVal:0,maxXVal:100,maxYVal:100,maxNumVertices:-1,quantizeX:.1,quantizeY:.1,xDecimalPrecision:1,yDecimalPrecision:1,hasFixedStartPoint:!1,hasFixedEndPoint:!1,fixedStartPointY:0,fixedEndPointY:0,isEditable:!0,vertexColor:"#f40",lineColor:"#484848",backgroundColor:"#fff",vertexRadius:4,lineWidth:2,mouseSensitivity:1.2},r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initStateConstraints",value:function(){var t=this;this.stateConstraints=new l.default({vertices:[{x:new a.default({min:t.o.minXVal,max:t.o.maxXVal,transform:function(e){return u.default.quantize(e,t.o.quantizeX).toFixed(t.o.xDecimalPrecision)}}),y:new a.default({min:t.o.minYVal,max:t.o.maxYVal,transform:function(e){return u.default.quantize(e,t.o.quantizeY).toFixed(t.o.yDecimalPrecision)}})}]})}},{key:"_initState",value:function(){this.state={vertices:[]},this.isFixedStartPointInitialized=!1,this.isFixedEndPointInitialized=!1}},{key:"_initSvgEls",value:function(){this.svgEls={panel:document.createElementNS(this.SVG_NS,"rect"),vertices:[],lines:[]},this.svgEls.panel.setAttribute("width",this._getWidth()),this.svgEls.panel.setAttribute("height",this._getHeight()),this.svgEls.panel.setAttribute("fill",this.o.backgroundColor),this.svgEls.panel.setAttribute("stroke",this.o.lineColor),this._appendSvgEls(),this._update()}},{key:"_initHandlers",value:function(){var t=this,e=null,n=null,i={},s=0,r=0,o=0,a=0;this.handlers={touchPanel:function(e){e.preventDefault();var n=e.clientX-t._getLeft(),i=e.clientY-t._getTop(),s=t._calcVertexState({x:n,y:i});t.addVertex(s)},touchVertex:function(n){n.preventDefault(),e=n.target,document.addEventListener("mousemove",t.handlers.moveVertex),document.addEventListener("touchmove",t.handlers.moveVertex),n.target.addEventListener("mouseup",t.handlers.deleteVertex),n.target.addEventListener("touchend",t.handlers.deleteVertex)},touchLine:function(e){e.preventDefault(),n=e.target,s=e.clientX-t._getLeft(),r=e.clientY-t._getTop(),i=null,document.addEventListener("mousemove",t.handlers.moveLine),document.addEventListener("touchmove",t.handlers.moveLine)},moveLine:function(e){e.preventDefault(),document.addEventListener("mouseup",t.handlers.endMoveLine),document.addEventListener("touchend",t.handlers.endMoveLine),o=e.clientX-t._getLeft(),a=e.clientY-t._getTop();var l={x:o-s,y:a-r};i=t._moveLine(n,l,i)},endMoveLine:function(e){e.preventDefault(),i=null,document.removeEventListener("mousemove",t.handlers.moveLine),document.removeEventListener("touchmove",t.handlers.moveLine)},deleteVertex:function(e){e.preventDefault(),document.removeEventListener("mousemove",t.handlers.moveVertex),document.removeEventListener("touchmove",t.handlers.moveVertex),t._deleteVertex(e.target),e.target.removeEventListener("mouseup",t.handlers.deleteVertex),e.target.removeEventListener("touchend",t.handlers.deleteVertex)},moveVertex:function(n){n.preventDefault(),e.removeEventListener("mouseup",t.handlers.deleteVertex),e.removeEventListener("touchend",t.handlers.deleteVertex),document.addEventListener("mouseup",t.handlers.endMoveVertex),document.addEventListener("touchend",t.handlers.endMoveVertex);var i=n.clientX-t._getLeft(),s=n.clientY-t._getTop();t._moveVertex(e,{x:i,y:s})},endMoveVertex:function(e){e.preventDefault(),document.removeEventListener("mousemove",t.handlers.moveVertex),document.removeEventListener("touchmove",t.handlers.moveVertex)}},this.svgEls.panel.addEventListener("mousedown",t.handlers.touchPanel),this.svgEls.panel.addEventListener("touchdown",t.handlers.touchPanel),this.svgEls.vertices.forEach(function(e){e.addEventListener("mousedown",t.handlers.touchVertex),e.addEventListener("touchdown",t.handlers.touchVertex)}),this.svgEls.lines.forEach(function(e){e.addEventListener("mousedown",t.handlers.touchLine),e.addEventListener("touchdown",t.handlers.touchLine)})}},{key:"_update",value:function(){var t=this;this.o.hasFixedStartPoint&&!this.isFixedStartPointInitialized&&(this.state.vertices.push({x:t.o.minXVal,y:t.o.fixedStartPointY}),this.isFixedStartPointInitialized=!0),this.o.hasFixedEndPoint&&!this.isFixedEndPointInitialized&&(this.state.vertices.push({x:t.o.maxXVal,y:t.o.fixedEndPointY}),this.isFixedEndPointInitialized=!0);var e=t.state.vertices.map(function(t,e){return{vtx:t,idx:e}});e.sort(function(t,e){return t.vtx.x-e.vtx.x}),t.state.vertices=e.map(function(e){return t.state.vertices[e.idx]}),this.o.hasFixedStartPoint&&this.isFixedStartPointInitialized&&(t.state.vertices[0].y=t.o.fixedStartPointY),this.o.hasFixedEndPoint&&this.isFixedEndPointInitialized&&(t.state.vertices[t.state.vertices.length-1].y=t.o.fixedEndPointY),!this.o.hasFixedStartPoint&&this.isFixedStartPointInitialized&&(this.state.vertices.splice(0,1),e.splice(0,1),e.forEach(function(t){return t.idx--}),this.isFixedStartPointInitialized=!1),!this.o.hasFixedEndPoint&&this.isFixedEndPointInitialized&&(this.state.vertices.pop(),e.pop(),this.isFixedEndPointInitialized=!1);for(var n=t.svgEls.vertices.length;n<t.state.vertices.length;++n)t._addSvgVertex();for(var i=t.svgEls.vertices.length;i>t.state.vertices.length;--i)t._removeSvgVertex();t.svgEls.vertices=e.map(function(e){return t.svgEls.vertices[e.idx]}),t.state.vertices.forEach(function(e,n){var i=t.svgEls.vertices[n],s=t._calcVertexPos(e);if(i.setAttribute("cx",s.x),i.setAttribute("cy",s.y),i.setAttribute("r",t.o.vertexRadius),i.setAttribute("fill",t.o.vertexColor),n>0){var r=t.state.vertices[n-1],o=t._calcVertexPos(r),a=t.svgEls.lines[n-1];a.setAttribute("d","M "+s.x+" "+s.y+" L "+o.x+" "+o.y),a.setAttribute("fill","transparent"),a.setAttribute("stroke-width",t.o.lineWidth),a.setAttribute("stroke",t.o.lineColor)}}),t.svgEls.lines.forEach(function(e){t.svg.removeChild(e),t.svg.appendChild(e)}),t.svgEls.vertices.forEach(function(e){t.svg.removeChild(e),t.svg.appendChild(e)}),t.svgEls.vertices.forEach(function(e){e.addEventListener("mousedown",t.handlers.touchVertex),e.addEventListener("touchdown",t.handlers.touchVertex)}),t.svgEls.lines.forEach(function(e){e.addEventListener("mousedown",t.handlers.touchLine),e.addEventListener("touchdown",t.handlers.touchLine)})}},{key:"_deleteVertex",value:function(t){var e=this.svgEls.vertices.findIndex(function(e){return e===t});if(-1!==e){var n=this.getState().vertices.map(function(t){return t});n.splice(e,1),this.setState({vertices:n})}}},{key:"_addSvgVertex",value:function(){var t=document.createElementNS(this.SVG_NS,"circle");this.svgEls.vertices.push(t),this.svg.appendChild(t),this.svgEls.vertices.length>1&&this._addSvgLine()}},{key:"_addSvgLine",value:function(){var t=document.createElementNS(this.SVG_NS,"path");this.svg.appendChild(t),this.svgEls.lines.push(t)}},{key:"_removeSvgVertex",value:function(){var t=this.svgEls.vertices[this.svgEls.vertices.length-1];this.svg.removeChild(t),t=null,this.svgEls.vertices.pop(),this.svgEls.lines.length>0&&this._removeSvgLine()}},{key:"_removeSvgLine",value:function(){var t=this.svgEls.lines[this.svgEls.lines.length-1];this.svg.removeChild(t),t=null,this.svgEls.lines.pop()}},{key:"_moveLine",value:function(t,e,n){var i=this.svgEls.lines.findIndex(function(e){return e===t}),s=this.svgEls.vertices[i],r=this.svgEls.vertices[i+1],o={x:parseInt(this.svgEls.vertices[i].getAttribute("cx")),y:parseInt(this.svgEls.vertices[i].getAttribute("cy"))},a={x:parseInt(this.svgEls.vertices[i+1].getAttribute("cx")),y:parseInt(this.svgEls.vertices[i+1].getAttribute("cy"))};if(null===n||void 0===n){n={vtx1:o,vtx2:a,boundaryBL:{x:i>0?parseInt(this.svgEls.vertices[i-1].getAttribute("cx")):this._calcVertexPos({x:this.o.minXVal,y:this.o.minYVal}).x,y:this._calcVertexPos({x:this.o.minXVal,y:this.o.minYVal}).y},boundaryTR:{x:i+2<this.svgEls.vertices.length?parseInt(this.svgEls.vertices[i+2].getAttribute("cx")):this._calcVertexPos({x:this.o.maxXVal,y:this.o.maxYVal}).x,y:this._calcVertexPos({x:this.o.maxXVal,y:this.o.maxYVal}).y}}}var l={x:n.vtx1.x+e.x,y:n.vtx1.y+e.y},u={x:n.vtx2.x+e.x,y:n.vtx2.y+e.y};return(l.x<n.boundaryBL.x||u.x<n.boundaryBL.x||l.x>n.boundaryTR.x||u.x>n.boundaryTR.x)&&(l.x=o.x,u.x=a.x),(l.y>n.boundaryBL.y||u.y>n.boundaryBL.y||l.y<n.boundaryTR.y||u.y<n.boundaryTR.y)&&(l.y=o.y,u.y=a.y),this._moveVertex(s,l),this._moveVertex(r,u),n}},{key:"_moveVertex",value:function(t,e){var n=this._calcVertexState(e),i=this.svgEls.vertices.findIndex(function(e){return e===t});if(!(0===i&&this.o.hasFixedStartPoint||i===this.state.vertices.length-1&&this.o.hasFixedEndPoint)){var s=this.getState().vertices.map(function(t){return t});s[i].x=n.x,s[i].y=n.y,this.setState({vertices:s})}}},{key:"_calcVertexPos",value:function(t){return{x:this._getWidth()*(t.x/this.o.maxXVal),y:this._getHeight()-this._getHeight()*(t.y/this.o.maxYVal)}}},{key:"_calcVertexState",value:function(t){return{x:this.o.maxXVal*(t.x/this._getWidth()),y:this.o.maxYVal-this.o.maxYVal*(t.y/this._getHeight())}}},{key:"_xPxToVal",value:function(t){return t/this._getWidth()*(this.o.maxXVal-this.o.minXVal)}},{key:"_yPxToVal",value:function(t){return t/this._getHeight()*(this.o.maxYVal-this.o.minYVal)}}]),e}();e.default=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=i(n(2)),o=i(n(0)),a=i(n(1)),l=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),s(e,[{key:"_initOptions",value:function(t){this.o={numSliders:10,minVal:0,maxVal:127,sliderColors:["#f40","#f50"],backgroundColor:"#fff",mouseSensitivity:1.2},function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initStateConstraints",value:function(){this.stateConstraints=new a.default({sliderVals:[new o.default({min:this.o.minVal,max:this.o.maxVal,transform:function(t){return t.toFixed(0)}})]})}},{key:"_initState",value:function(){this.state={sliderVals:[]}}},{key:"_initSvgEls",value:function(){this.svgEls={panel:document.createElementNS(this.SVG_NS,"rect"),sliders:[],sliderPanels:[]},this._appendSvgEls(),this._update()}},{key:"_initHandlers",value:function(){var t=this;this.handlers={touch:function(e){e.preventDefault();var n=t._getHeight()-t._getRelativeY(e.clientY);t._setSliderVal(e.target,n);for(var i=0;i<t.svgEls.sliderPanels.length;++i)t.svgEls.sliderPanels[i].addEventListener("mousemove",t.handlers.move),t.svgEls.sliderPanels[i].addEventListener("touchmove",t.handlers.move);document.addEventListener("mouseup",t.handlers.release),document.addEventListener("touchend",t.handlers.release)},move:function(e){e.preventDefault();var n=t._getHeight()-t._getRelativeY(e.clientY);t._setSliderVal(e.target,n)},release:function(e){e.preventDefault();for(var n=0;n<t.svgEls.sliderPanels.length;++n)t.svgEls.sliderPanels[n].removeEventListener("mousemove",t.handlers.move),t.svgEls.sliderPanels[n].removeEventListener("touchmove",t.handlers.move)}};for(var e=0;e<this.svgEls.sliderPanels.length;++e)this.svgEls.sliderPanels[e].addEventListener("mousedown",this.handlers.touch),this.svgEls.sliderPanels[e].addEventListener("touchstart",this.handlers.touch)}},{key:"_update",value:function(){this._updateEls();for(var t=0;t<this.o.numSliders;++t){var e=this._calcSliderPos(t);this.svgEls.sliders[t].setAttribute("x",e.x),this.svgEls.sliders[t].setAttribute("y",e.y),this.svgEls.sliders[t].setAttribute("width",this._calcSliderWidth()),this.svgEls.sliders[t].setAttribute("height",this._calcSliderHeight(t)),this.svgEls.sliders[t].setAttribute("fill",this.o.sliderColors[t%this.o.sliderColors.length]),this.svgEls.sliderPanels[t].setAttribute("x",e.x),this.svgEls.sliderPanels[t].setAttribute("y",0),this.svgEls.sliderPanels[t].setAttribute("width",this._calcSliderWidth()),this.svgEls.sliderPanels[t].setAttribute("height",this._getHeight()),this.svgEls.sliderPanels[t].setAttribute("fill","transparent")}this.svgEls.panel.setAttribute("x",0),this.svgEls.panel.setAttribute("y",0),this.svgEls.panel.setAttribute("width",this._getWidth()),this.svgEls.panel.setAttribute("height",this._getHeight()),this.svgEls.panel.setAttribute("fill",this.o.backgroundColor)}},{key:"_updateEls",value:function(){for(var t=this.o.numSliders,e=this.state.sliderVals.length;e<t;++e)this.state.sliderVals.push(this.o.minVal),this._addSvgSlider();for(var n=this.state.sliderVals.length;n>t;--n)this.state.sliderVals.pop(),this._removeSvgSlider()}},{key:"getVal",value:function(){return this.getState().sliderVals}},{key:"setInternalVal",value:function(t){var e={sliderVals:t};this.setInternalState(e)}},{key:"setVal",value:function(t){var e={sliderVals:t};this.setState(e)}},{key:"_addSvgSlider",value:function(){var t=document.createElementNS(this.SVG_NS,"rect"),e=document.createElementNS(this.SVG_NS,"rect");this.svg.appendChild(t),this.svg.appendChild(e),this.svgEls.sliders.push(t),this.svgEls.sliderPanels.push(e),e.addEventListener("mousedown",this.handlers.touch),e.addEventListener("touchstart",this.handlers.touch)}},{key:"_removeSvgSlider",value:function(){var t=this.svgEls.sliders.pop(),e=this.svgEls.sliderPanels.pop();this.svg.removeChild(e),this.svg.removeChild(t),t=null,e=null}},{key:"_calcSliderWidth",value:function(){return this._getWidth()/this.o.numSliders}},{key:"_calcSliderPos",value:function(t){return{x:this._calcSliderWidth()*t,y:this._getHeight()-this._calcSliderHeight(t)}}},{key:"_calcSliderHeight",value:function(t){return this.state.sliderVals[t]/(this.o.maxVal-this.o.minVal)*this._getHeight()}},{key:"_setSliderVal",value:function(t,e){var n=this.svgEls.sliderPanels.findIndex(function(e){return e===t}),i=e/this._getHeight()*(this.o.maxVal-this.o.minVal)+this.o.minVal,s={sliderVals:this.state.sliderVals.map(function(t,e){return e===n?i:t})};this.setState(s)}}]),e}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=i(n(2)),o=i(n(0)),a=i(n(1)),l=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),s(e,[{key:"_initOptions",value:function(t){this.o={minVal:0,maxVal:127,sliderBodyColor:"#484848",sliderHandleColor:"#484848",mouseSensitivity:1.2},function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initStateConstraints",value:function(){this.stateConstraints=new a.default({val:new o.default({min:this.o.minVal,max:this.o.maxVal,transform:function(t){return t.toFixed(0)}})})}},{key:"_initState",value:function(){this.state={val:this.o.minVal},this.dims={offsetBottom:5,offsetTop:5,bodyWidth:2,handleWidth:10,handleHeight:10}}},{key:"_initSvgEls",value:function(){this.svgEls={body:document.createElementNS(this.SVG_NS,"rect"),overlay:document.createElementNS(this.SVG_NS,"rect"),handle:document.createElementNS(this.SVG_NS,"polygon")},this._appendSvgEls(),this._update()}},{key:"_initHandlers",value:function(){var t=this;this.handlers={touchBody:function(e){e.preventDefault(),e.stopPropagation();var n=t._calcTouchVal(e.clientY);t.setState({val:n}),t.handlers.touchHandle(e)},touchHandle:function(e){e.preventDefault(),e.stopPropagation(),document.body.addEventListener("mousemove",t.handlers.moveHandle),document.body.addEventListener("touchmove",t.handlers.moveHandle),document.body.addEventListener("mouseup",t.handlers.releaseHandle),document.body.addEventListener("touchend",t.handlers.releaseHandle)},moveHandle:function(e){e.preventDefault(),e.stopPropagation();var n=t._calcTouchVal(e.clientY);t.setState({val:n})},releaseHandle:function(e){e.preventDefault(),e.stopPropagation(),document.body.removeEventListener("touchmove",t.handlers.moveHandle),document.body.removeEventListener("mousemove",t.handlers.moveHandle),document.body.removeEventListener("mouseup",t.handlers.releaseHandle),document.body.removeEventListener("touchend",t.handlers.releaseHandle)}},this.svgEls.overlay.addEventListener("mousedown",t.handlers.touchBody),this.svgEls.overlay.addEventListener("touchstart",t.handlers.touchBody),this.svgEls.handle.addEventListener("mousedown",t.handlers.touchHandle),this.svgEls.handle.addEventListener("touchstart",t.handlers.touchHandle)}},{key:"_update",value:function(){var t=this._calcSliderBodyPos();this.svgEls.body.setAttribute("x",t.x),this.svgEls.body.setAttribute("y",t.y),this.svgEls.body.setAttribute("width",this.dims.bodyWidth),this.svgEls.body.setAttribute("height",this._calcSliderBodyHeight()),this.svgEls.body.setAttribute("fill",this.o.sliderBodyColor),this.svgEls.overlay.setAttribute("x",t.x),this.svgEls.overlay.setAttribute("y",t.y),this.svgEls.overlay.setAttribute("width",this.dims.bodyWidth+this.dims.handleWidth),this.svgEls.overlay.setAttribute("height",this._calcSliderBodyHeight()),this.svgEls.overlay.setAttribute("fill","transparent");var e=this._calcSliderHandlePoints();this.svgEls.handle.setAttribute("points",e),this.svgEls.handle.setAttribute("fill",this.o.sliderHandleColor)}},{key:"getVal",value:function(){return this.state.val}},{key:"setInternalVal",value:function(t){this.setInternalState({val:t})}},{key:"setVal",value:function(t){this.setState({val:t})}},{key:"_calcSliderBodyPos",value:function(){return{x:this._getWidth()/2-1,y:this.dims.offsetTop}}},{key:"_calcSliderBodyHeight",value:function(){return this._getHeight()-this.dims.offsetTop-this.dims.offsetBottom}},{key:"_calcSliderBodyWidth",value:function(){return this.dims.bodyWidth}},{key:"_calcSliderHandlePoints",value:function(){var t=this._calcSliderBodyHeight(),e=this._getWidth()/2+1,n=t-this.state.val/(this.o.maxVal-this.o.minVal)*t+this.dims.offsetBottom,i=e+this.dims.handleWidth;return e+","+n+" "+i+","+(n-this.dims.handleHeight/2)+" "+i+","+(n+this.dims.handleHeight/2)}},{key:"_calcTouchVal",value:function(t){var e=this.o.maxVal-this.o.minVal;return(this._getHeight()-this._getRelativeY(t)-this.dims.offsetBottom)/this._calcSliderBodyHeight()*e+this.o.minVal}}]),e}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=i(n(2)),o=(i(n(0)),i(n(1)),function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=i||{};var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return s.container.removeChild(s.svg),s.svg=null,s._initCanvasElements(),s._initAudioModules(n),s._initOptions(i),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),s(e,[{key:"_initOptions",value:function(t){this.o={backgroundColor:"#282828",initAmplitude:0},function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initAudioModules",value:function(t){var e=this;this.audioCtx=t,this.amplitude=0,this.prevAmplitude=0,this.peak=0,this.peakSetTime=t.currentTime,this.scriptProcessor=this.audioCtx.createScriptProcessor(512,1,1),this.scriptProcessor.connect(this.audioCtx.destination),this.scriptProcessor.onaudioprocess=function(t){e.amplitude=e._calcAmplitude(t.inputBuffer.getChannelData(0)),e.peak=e._calcPeak()},this.input=this.scriptProcessor}},{key:"_initCanvasElements",value:function(){void 0===this.canvas&&(this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"));var t=this.container.getBoundingClientRect();this.canvas.setAttribute("width",t.width),this.canvas.setAttribute("height",t.height),this.ledGradient=this.ctx.createLinearGradient(0,this.canvas.height,0,0),this.ledGradient.addColorStop(0,"green"),this.ledGradient.addColorStop(.6,"lightgreen"),this.ledGradient.addColorStop(.8,"yellow"),this.ledGradient.addColorStop(1,"red"),this._update()}},{key:"_update",value:function(){function t(){var n=s*e.amplitude,r=s*e.peak;e.ctx.clearRect(0,0,i,s),e.ctx.fillStyle=e.o.backgroundColor,e.ctx.fillRect(0,0,i,s),e.ctx.fillStyle=e.ledGradient,e.ctx.fillRect(0,s-n,i,n),e.ctx.fillStyle=e.ledGradient,e.ctx.fillRect(0,r,i,10),window.requestAnimationFrame(t)}var e=this,n=this.container.getBoundingClientRect(),i=n.width,s=n.height;t()}},{key:"receiveAudioFrom",value:function(t){t.connect(this.scriptProcessor)}},{key:"_calcAmplitude",value:function(t){for(var e=0,n=0;n<t.length;++n)e+=t[n]*t[n];return Math.sqrt(e/t.length)}},{key:"_calcPeak",value:function(){this.amplitude<this.prevAmplitude?(this.peak=this.prevAmplitude,this.peakSetTime=this.audioCtx.currentTime):this.amplitude>this.prevAmplitude&&(this.peak=0),this.audioCtx.currentTime-this.peakSetTime>2&&0!==this.peak&&(this.peak=-1),this.prevAmplitude=this.amplitude}}]),e}());e.default=o},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var s=i(n(3)),r=i(n(17)),o=i(n(16)),a=i(n(18)),l=i(n(13)),u=i(n(19)),h=i(n(20)),c=i(n(7)),d=document.getElementById("dial"),v=d.nextElementSibling,f=new s.default(d);f.addObserver(function(t){v.innerHTML=t}),f.setVal(300);var g=document.getElementById("graph"),m=document.getElementById("graph-display"),p=new r.default(g);p.addObserver(function(t){m.innerHTML=t.map(function(t){return" ["+t[0]+", "+t[1]+"]"})}),p.setVal([[0,0],[5.3,65.9],[10.7,37.3],[16.5,26.5],[26,37.9],[35.8,17.2],[45.3,69.2],[49.8,53.9],[53.3,27.2],[61.3,15.9],[69.3,25.9],[74.7,39.9],[79.5,47.9],[83.2,33.9],[86.2,25.9],[91,19.2],[92,28.5],[93,44.5],[97.3,81.9],[100,0]]);var y=document.getElementById("keyboard"),_=document.getElementById("keyboard-display");y.style.backgroundColor="red";var E=new o.default(y,{bottomNote:36,topNote:83});E.addObserver(function(t){_.innerHTML="Pitch: "+t.pitch+" Vel: "+t.vel+"<br>Active Notes: "+E.getActiveNotes().map(function(t){return"[ "+t[0]+", "+t[1]+" ]"})}),E.setVal({pitch:60,vel:100}),E.setVal({pitch:64,vel:100}),E.setVal({pitch:67,vel:100});var b=document.getElementById("multislider"),x=document.getElementById("multislider-display"),S=new a.default(b,{});S.addObserver(function(t){x.innerHTML=t.map(function(t){return" "+t})}),S.setState({sliderVals:[10,50,97,81,119,81,26,114,74,47]});var k=document.getElementById("slider"),O=document.getElementById("slider-display"),P=new u.default(k,{});P.addObserver(function(t){O.innerHTML=t}),P.setVal(30);var V=document.getElementById("meter"),w=(document.getElementById("meter-display"),new AudioContext),C=new h.default(V,w,{}),A=w.createOscillator(),I=w.createOscillator(),L=w.createOscillator(),N=w.createGain(),j=w.createGain(),M=w.createGain();I.frequency.value=.5,L.frequency.value=.1,M.gain.value=.5,A.frequency.value=220,I.connect(N.gain),L.connect(N),N.connect(j.gain),A.connect(j),j.connect(M),C.receiveAudioFrom(M),I.start(),L.start(),A.start();var T=document.getElementById("dropmenu"),B=document.getElementById("dropmenu-display"),H=new l.default(T,{});H.setMenuItems(["Zero","One","Two","Three","Four","Five"]),H.addObserver(function(t){B.innerHTML="Current selection: "+t});var W=document.getElementById("numberbox"),F=document.getElementById("numberbox-display");new c.default(W,{}).addObserver(function(t){F.innerHTML=t})}]);